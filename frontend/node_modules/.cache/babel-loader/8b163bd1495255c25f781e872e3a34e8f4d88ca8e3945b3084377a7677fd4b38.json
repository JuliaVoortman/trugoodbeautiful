{"ast":null,"code":"import React,{useState,useEffect}from'react';import ArticleCard from'./ArticleCard';import FeaturedStory from'./FeaturedStory';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ArticleDisplay=_ref=>{var _filterArticlesByDate;let{articles,selectedSentiment}=_ref;const[displayCount,setDisplayCount]=useState(3);const[displayedArticles,setDisplayedArticles]=useState([]);const[featuredArticle,setFeaturedArticle]=useState(null);const[selectedDate,setSelectedDate]=useState('all');// Extract unique dates from articles\nconst uniqueDates=[...new Set(articles===null||articles===void 0?void 0:articles.map(article=>{const date=new Date(article.fields.publicationDate);return date.toLocaleDateString('en-US',{month:'long',day:'numeric',year:'numeric'});}))].sort((a,b)=>new Date(b)-new Date(a));// Filter articles by selected date\nconst filterArticlesByDate=articlesToFilter=>{if(selectedDate==='all')return articlesToFilter;return articlesToFilter.filter(article=>{const articleDate=new Date(article.fields.publicationDate);const formattedDate=articleDate.toLocaleDateString('en-US',{month:'long',day:'numeric',year:'numeric'});return formattedDate===selectedDate;});};// Set featured article and initial articles when articles array or date filter changes\nuseEffect(()=>{if((articles===null||articles===void 0?void 0:articles.length)>0){const filteredArticles=filterArticlesByDate(articles);if(filteredArticles.length>0){const featured=filteredArticles[0];setFeaturedArticle(featured);const remaining=filteredArticles.slice(1,4);setDisplayedArticles(remaining);setDisplayCount(3);}else{setFeaturedArticle(null);setDisplayedArticles([]);}}else{setFeaturedArticle(null);setDisplayedArticles([]);}},[articles,selectedDate]);// Update displayed articles when count changes\nuseEffect(()=>{if((articles===null||articles===void 0?void 0:articles.length)>1){const filteredArticles=filterArticlesByDate(articles);setDisplayedArticles(filteredArticles.slice(1,displayCount+1));}},[displayCount,articles,selectedDate]);// Debug logging\nuseEffect(()=>{var _featuredArticle$fiel;console.log('ArticleDisplay State:',{selectedSentiment,selectedDate,featuredArticle:featuredArticle===null||featuredArticle===void 0?void 0:(_featuredArticle$fiel=featuredArticle.fields)===null||_featuredArticle$fiel===void 0?void 0:_featuredArticle$fiel.pageName,totalArticles:articles===null||articles===void 0?void 0:articles.length,displayedCount:displayedArticles===null||displayedArticles===void 0?void 0:displayedArticles.length,hasMore:(articles===null||articles===void 0?void 0:articles.length)>displayCount+1});},[articles,displayCount,displayedArticles,featuredArticle,selectedSentiment,selectedDate]);const hasMore=((_filterArticlesByDate=filterArticlesByDate(articles))===null||_filterArticlesByDate===void 0?void 0:_filterArticlesByDate.length)>displayCount+1;const handleLoadMore=()=>{setDisplayCount(prev=>prev+3);};if(!articles){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading articles...\"});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center pl-2 mb-2\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-semibold text-slate-800\",children:\"Featured story\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedDate,onChange:e=>setSelectedDate(e.target.value),className:\"px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm text-slate-600  focus:outline-none focus:ring-2 focus:ring-green-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All dates\"}),uniqueDates.map(date=>/*#__PURE__*/_jsx(\"option\",{value:date,children:date},date))]})]}),featuredArticle&&/*#__PURE__*/_jsx(\"div\",{className:\"pt-2 pb-20\",children:/*#__PURE__*/_jsx(FeaturedStory,{article:featuredArticle})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:displayedArticles.map(article=>/*#__PURE__*/_jsx(ArticleCard,{article:article},article.sys.id))}),hasMore&&/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mt-8\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:handleLoadMore,className:\"px-6 py-3 bg-stone-200 hover:bg-green-600 hover:text-white text-slate-600 rounded-xl  transition-all duration-100 font-medium shadow-md hover:shadow-lg\",children:[\"Load more stories (\",filterArticlesByDate(articles).length-(displayCount+1),\" remaining)\"]})})]});};export default ArticleDisplay;","map":{"version":3,"names":["React","useState","useEffect","ArticleCard","FeaturedStory","jsx","_jsx","jsxs","_jsxs","ArticleDisplay","_ref","_filterArticlesByDate","articles","selectedSentiment","displayCount","setDisplayCount","displayedArticles","setDisplayedArticles","featuredArticle","setFeaturedArticle","selectedDate","setSelectedDate","uniqueDates","Set","map","article","date","Date","fields","publicationDate","toLocaleDateString","month","day","year","sort","a","b","filterArticlesByDate","articlesToFilter","filter","articleDate","formattedDate","length","filteredArticles","featured","remaining","slice","_featuredArticle$fiel","console","log","pageName","totalArticles","displayedCount","hasMore","handleLoadMore","prev","children","className","value","onChange","e","target","sys","id","onClick"],"sources":["/Users/julia.voortman/Documents/trugoodbeautiful/frontend/src/components/ArticleDisplay.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport ArticleCard from './ArticleCard';\nimport FeaturedStory from './FeaturedStory';\n\nconst ArticleDisplay = ({ articles, selectedSentiment }) => {\n  const [displayCount, setDisplayCount] = useState(3);\n  const [displayedArticles, setDisplayedArticles] = useState([]);\n  const [featuredArticle, setFeaturedArticle] = useState(null);\n  const [selectedDate, setSelectedDate] = useState('all');\n\n  // Extract unique dates from articles\n  const uniqueDates = [...new Set(articles?.map(article => {\n    const date = new Date(article.fields.publicationDate);\n    return date.toLocaleDateString('en-US', { \n      month: 'long', \n      day: 'numeric',\n      year: 'numeric'\n    });\n  }))].sort((a, b) => new Date(b) - new Date(a));\n\n  // Filter articles by selected date\n  const filterArticlesByDate = (articlesToFilter) => {\n    if (selectedDate === 'all') return articlesToFilter;\n    \n    return articlesToFilter.filter(article => {\n      const articleDate = new Date(article.fields.publicationDate);\n      const formattedDate = articleDate.toLocaleDateString('en-US', {\n        month: 'long',\n        day: 'numeric',\n        year: 'numeric'\n      });\n      return formattedDate === selectedDate;\n    });\n  };\n\n  // Set featured article and initial articles when articles array or date filter changes\n  useEffect(() => {\n    if (articles?.length > 0) {\n      const filteredArticles = filterArticlesByDate(articles);\n      \n      if (filteredArticles.length > 0) {\n        const featured = filteredArticles[0];\n        setFeaturedArticle(featured);\n        \n        const remaining = filteredArticles.slice(1, 4);\n        setDisplayedArticles(remaining);\n        setDisplayCount(3);\n      } else {\n        setFeaturedArticle(null);\n        setDisplayedArticles([]);\n      }\n    } else {\n      setFeaturedArticle(null);\n      setDisplayedArticles([]);\n    }\n  }, [articles, selectedDate]);\n\n  // Update displayed articles when count changes\n  useEffect(() => {\n    if (articles?.length > 1) {\n      const filteredArticles = filterArticlesByDate(articles);\n      setDisplayedArticles(filteredArticles.slice(1, displayCount + 1));\n    }\n  }, [displayCount, articles, selectedDate]);\n\n  // Debug logging\n  useEffect(() => {\n    console.log('ArticleDisplay State:', {\n      selectedSentiment,\n      selectedDate,\n      featuredArticle: featuredArticle?.fields?.pageName,\n      totalArticles: articles?.length,\n      displayedCount: displayedArticles?.length,\n      hasMore: articles?.length > (displayCount + 1)\n    });\n  }, [articles, displayCount, displayedArticles, featuredArticle, selectedSentiment, selectedDate]);\n\n  const hasMore = filterArticlesByDate(articles)?.length > (displayCount + 1);\n\n  const handleLoadMore = () => {\n    setDisplayCount(prev => prev + 3);\n  };\n\n  if (!articles) {\n    return <div>Loading articles...</div>;\n  }\n\n  return (\n    <div>\n      {/* Featured Story Header with Date Filter */}\n      <div className=\"flex justify-between items-center pl-2 mb-2\">\n        <h1 className=\"text-xl font-semibold text-slate-800\">\n          Featured story\n        </h1>\n        <select\n          value={selectedDate}\n          onChange={(e) => setSelectedDate(e.target.value)}\n          className=\"px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm text-slate-600 \n            focus:outline-none focus:ring-2 focus:ring-green-500\"\n        >\n          <option value=\"all\">All dates</option>\n          {uniqueDates.map(date => (\n            <option key={date} value={date}>\n              {date}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      {/* Featured Story Section */}\n      {featuredArticle && (\n        <div className=\"pt-2 pb-20\">\n          <FeaturedStory article={featuredArticle} />\n        </div>\n      )}\n\n      {/* Article Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {displayedArticles.map((article) => (\n          <ArticleCard \n            key={article.sys.id} \n            article={article} \n          />\n        ))}\n      </div>\n\n      {/* Load More Button */}\n      {hasMore && (\n        <div className=\"flex justify-center mt-8\">\n          <button\n            onClick={handleLoadMore}\n            className=\"px-6 py-3 bg-stone-200 hover:bg-green-600 hover:text-white text-slate-600 rounded-xl \n              transition-all duration-100 font-medium shadow-md hover:shadow-lg\"\n          >\n            Load more stories ({filterArticlesByDate(articles).length - (displayCount + 1)} remaining)\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ArticleDisplay;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}