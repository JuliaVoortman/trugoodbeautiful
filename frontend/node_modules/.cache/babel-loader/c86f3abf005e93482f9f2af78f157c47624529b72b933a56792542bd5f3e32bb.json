{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import ArticleCard from'./ArticleCard';import FeaturedStory from'./FeaturedStory';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ArticleDisplay=_ref=>{var _filterArticlesByDate;let{articles,selectedSentiment}=_ref;const[displayCount,setDisplayCount]=useState(3);const[displayedArticles,setDisplayedArticles]=useState([]);const[featuredArticle,setFeaturedArticle]=useState(null);const[selectedDate,setSelectedDate]=useState('all');// Helper function to get relative date string\nconst getRelativeDateString=daysAgo=>{const date=new Date();date.setDate(date.getDate()-daysAgo);return date.toLocaleDateString('en-US',{weekday:'long',month:'long',day:'numeric',year:'numeric'});};// Extract unique dates from articles with proper formatting\nconst uniqueDates=[...new Set(articles===null||articles===void 0?void 0:articles.map(article=>{if(!article.fields.publicationDate)return null;const date=new Date(article.fields.publicationDate);return date.toLocaleDateString('en-US',{weekday:'long',month:'long',day:'numeric',year:'numeric'});}))].filter(Boolean).sort((a,b)=>new Date(b)-new Date(a));// Filter articles by selected date - memoized with useCallback\nconst filterArticlesByDate=useCallback(articlesToFilter=>{if(!articlesToFilter||selectedDate==='all')return articlesToFilter;return articlesToFilter.filter(article=>{if(!article.fields.publicationDate)return false;const articleDate=new Date(article.fields.publicationDate);const formattedDate=articleDate.toLocaleDateString('en-US',{weekday:'long',month:'long',day:'numeric',year:'numeric'});if(selectedDate==='today'){return formattedDate===getRelativeDateString(0);}else if(selectedDate==='yesterday'){return formattedDate===getRelativeDateString(1);}return formattedDate===selectedDate;});},[selectedDate]);// Set featured article and initial articles when articles array or date filter changes\nuseEffect(()=>{if((articles===null||articles===void 0?void 0:articles.length)>0){const filteredArticles=filterArticlesByDate(articles);if(filteredArticles.length>0){const featured=filteredArticles[0];setFeaturedArticle(featured);const remaining=filteredArticles.slice(1,4);setDisplayedArticles(remaining);setDisplayCount(3);}else{setFeaturedArticle(null);setDisplayedArticles([]);}}else{setFeaturedArticle(null);setDisplayedArticles([]);}},[articles,selectedDate,filterArticlesByDate]);// Update displayed articles when count changes\nuseEffect(()=>{if((articles===null||articles===void 0?void 0:articles.length)>1){const filteredArticles=filterArticlesByDate(articles);setDisplayedArticles(filteredArticles.slice(1,displayCount+1));}},[displayCount,articles,filterArticlesByDate]);const hasMore=((_filterArticlesByDate=filterArticlesByDate(articles))===null||_filterArticlesByDate===void 0?void 0:_filterArticlesByDate.length)>displayCount+1;const handleLoadMore=()=>{setDisplayCount(prev=>prev+3);};if(!articles){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading articles...\"});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center pl-2 mb-2\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl text-slate-700\",children:\"Featured story\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedDate,onChange:e=>setSelectedDate(e.target.value),className:\"px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm text-slate-600  focus:outline-none focus:ring-2 focus:ring-green-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All dates\"}),/*#__PURE__*/_jsx(\"option\",{value:\"today\",children:\"Today\"}),/*#__PURE__*/_jsx(\"option\",{value:\"yesterday\",children:\"Yesterday\"}),/*#__PURE__*/_jsx(\"option\",{disabled:true,children:\"\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\"}),uniqueDates.filter(date=>date!==getRelativeDateString(0)&&date!==getRelativeDateString(1)).map(date=>/*#__PURE__*/_jsx(\"option\",{value:date,children:date},date))]})]}),featuredArticle&&/*#__PURE__*/_jsx(\"div\",{className:\"pt-2 pb-20\",children:/*#__PURE__*/_jsx(FeaturedStory,{article:featuredArticle})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:displayedArticles.map(article=>/*#__PURE__*/_jsx(ArticleCard,{article:article},article.sys.id))}),hasMore&&/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mt-8\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:handleLoadMore,className:\"px-6 py-3 bg-stone-200 hover:bg-green-600 hover:text-white text-slate-600 rounded-xl  transition-all duration-100 font-medium shadow-md hover:shadow-lg\",children:[\"Load more stories (\",filterArticlesByDate(articles).length-(displayCount+1),\" remaining)\"]})})]});};export default ArticleDisplay;","map":{"version":3,"names":["React","useState","useEffect","useCallback","ArticleCard","FeaturedStory","jsx","_jsx","jsxs","_jsxs","ArticleDisplay","_ref","_filterArticlesByDate","articles","selectedSentiment","displayCount","setDisplayCount","displayedArticles","setDisplayedArticles","featuredArticle","setFeaturedArticle","selectedDate","setSelectedDate","getRelativeDateString","daysAgo","date","Date","setDate","getDate","toLocaleDateString","weekday","month","day","year","uniqueDates","Set","map","article","fields","publicationDate","filter","Boolean","sort","a","b","filterArticlesByDate","articlesToFilter","articleDate","formattedDate","length","filteredArticles","featured","remaining","slice","hasMore","handleLoadMore","prev","children","className","value","onChange","e","target","disabled","sys","id","onClick"],"sources":["/Users/julia.voortman/Documents/trugoodbeautiful/frontend/src/components/ArticleDisplay.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport ArticleCard from './ArticleCard';\nimport FeaturedStory from './FeaturedStory';\n\nconst ArticleDisplay = ({ articles, selectedSentiment }) => {\n  const [displayCount, setDisplayCount] = useState(3);\n  const [displayedArticles, setDisplayedArticles] = useState([]);\n  const [featuredArticle, setFeaturedArticle] = useState(null);\n  const [selectedDate, setSelectedDate] = useState('all');\n\n  // Helper function to get relative date string\n  const getRelativeDateString = (daysAgo) => {\n    const date = new Date();\n    date.setDate(date.getDate() - daysAgo);\n    return date.toLocaleDateString('en-US', { \n      weekday: 'long',\n      month: 'long', \n      day: 'numeric',\n      year: 'numeric'\n    });\n  };\n\n  // Extract unique dates from articles with proper formatting\n  const uniqueDates = [...new Set(articles?.map(article => {\n    if (!article.fields.publicationDate) return null;\n    const date = new Date(article.fields.publicationDate);\n    return date.toLocaleDateString('en-US', { \n      weekday: 'long',\n      month: 'long', \n      day: 'numeric',\n      year: 'numeric'\n    });\n  }))].filter(Boolean).sort((a, b) => new Date(b) - new Date(a));\n\n  // Filter articles by selected date - memoized with useCallback\n  const filterArticlesByDate = useCallback((articlesToFilter) => {\n    if (!articlesToFilter || selectedDate === 'all') return articlesToFilter;\n    \n    return articlesToFilter.filter(article => {\n      if (!article.fields.publicationDate) return false;\n      const articleDate = new Date(article.fields.publicationDate);\n      const formattedDate = articleDate.toLocaleDateString('en-US', {\n        weekday: 'long',\n        month: 'long',\n        day: 'numeric',\n        year: 'numeric'\n      });\n\n      if (selectedDate === 'today') {\n        return formattedDate === getRelativeDateString(0);\n      } else if (selectedDate === 'yesterday') {\n        return formattedDate === getRelativeDateString(1);\n      }\n      \n      return formattedDate === selectedDate;\n    });\n  }, [selectedDate]);\n\n  // Set featured article and initial articles when articles array or date filter changes\n  useEffect(() => {\n    if (articles?.length > 0) {\n      const filteredArticles = filterArticlesByDate(articles);\n      \n      if (filteredArticles.length > 0) {\n        const featured = filteredArticles[0];\n        setFeaturedArticle(featured);\n        \n        const remaining = filteredArticles.slice(1, 4);\n        setDisplayedArticles(remaining);\n        setDisplayCount(3);\n      } else {\n        setFeaturedArticle(null);\n        setDisplayedArticles([]);\n      }\n    } else {\n      setFeaturedArticle(null);\n      setDisplayedArticles([]);\n    }\n  }, [articles, selectedDate, filterArticlesByDate]);\n\n  // Update displayed articles when count changes\n  useEffect(() => {\n    if (articles?.length > 1) {\n      const filteredArticles = filterArticlesByDate(articles);\n      setDisplayedArticles(filteredArticles.slice(1, displayCount + 1));\n    }\n  }, [displayCount, articles, filterArticlesByDate]);\n\n  const hasMore = filterArticlesByDate(articles)?.length > (displayCount + 1);\n\n  const handleLoadMore = () => {\n    setDisplayCount(prev => prev + 3);\n  };\n\n  if (!articles) {\n    return <div>Loading articles...</div>;\n  }\n\n  return (\n    <div>\n      {/* Featured Story Header with Date Filter */}\n      <div className=\"flex justify-between items-center pl-2 mb-2\">\n        <h1 className=\"text-xl text-slate-700\">\n          Featured story\n        </h1>\n        <select\n          value={selectedDate}\n          onChange={(e) => setSelectedDate(e.target.value)}\n          className=\"px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm text-slate-600 \n            focus:outline-none focus:ring-2 focus:ring-green-500\"\n        >\n          <option value=\"all\">All dates</option>\n          <option value=\"today\">Today</option>\n          <option value=\"yesterday\">Yesterday</option>\n          <option disabled>──────────</option>\n          {uniqueDates\n            .filter(date => \n              date !== getRelativeDateString(0) && \n              date !== getRelativeDateString(1)\n            )\n            .map(date => (\n              <option key={date} value={date}>\n                {date}\n              </option>\n            ))\n          }\n        </select>\n      </div>\n\n      {/* Featured Story Section */}\n      {featuredArticle && (\n        <div className=\"pt-2 pb-20\">\n          <FeaturedStory article={featuredArticle} />\n        </div>\n      )}\n\n      {/* Article Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {displayedArticles.map((article) => (\n          <ArticleCard \n            key={article.sys.id} \n            article={article} \n          />\n        ))}\n      </div>\n\n      {/* Load More Button */}\n      {hasMore && (\n        <div className=\"flex justify-center mt-8\">\n          <button\n            onClick={handleLoadMore}\n            className=\"px-6 py-3 bg-stone-200 hover:bg-green-600 hover:text-white text-slate-600 rounded-xl \n              transition-all duration-100 font-medium shadow-md hover:shadow-lg\"\n          >\n            Load more stories ({filterArticlesByDate(articles).length - (displayCount + 1)} remaining)\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ArticleDisplay;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}