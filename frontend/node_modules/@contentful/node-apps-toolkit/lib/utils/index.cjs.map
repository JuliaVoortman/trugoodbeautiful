{"version":3,"sources":["../../package.json","../../src/utils/index.ts","../../src/utils/http.ts","../../src/utils/logger.ts"],"sourcesContent":["{\n  \"name\": \"@contentful/node-apps-toolkit\",\n  \"version\": \"3.13.1\",\n  \"description\": \"A collection of helpers and utilities for creating NodeJS Contentful Apps\",\n  \"main\": \"lib/index.cjs\",\n  \"module\": \"lib/index.mjs\",\n  \"types\": \"lib/index.d.ts\",\n  \"files\": [\n    \"lib/**/*\"\n  ],\n  \"exports\": {\n    \".\": {\n      \"import\": \"./lib/index.mjs\",\n      \"require\": \"./lib/index.cjs\"\n    },\n    \"./keys\": {\n      \"import\": \"./lib/keys/index.mjs\",\n      \"require\": \"./lib/keys/index.cjs\"\n    },\n    \"./requests\": {\n      \"import\": \"./lib/requests/index.mjs\",\n      \"require\": \"./lib/requests/index.cjs\"\n    },\n    \"./requests/typings\": {\n      \"import\": \"./lib/requests//typingsindex.mjs\",\n      \"require\": \"./lib/requests/typings/index.cjs\"\n    },\n    \"./utils\": {\n      \"import\": \"./lib/utils/index.mjs\",\n      \"require\": \"./lib/utils/index.cjs\"\n    }\n  },\n  \"engines\": {\n    \"node\": \">=18\"\n  },\n  \"scripts\": {\n    \"prepare\": \"husky install\",\n    \"lint\": \"eslint --ext .ts ./src\",\n    \"lint:fix\": \"npm run lint -- --fix\",\n    \"pretest\": \"echo ' ðŸ”‘ Creating valid keypair for testing' && sh test/make-private-keys.sh &> /dev/null\",\n    \"test:unit\": \"mocha -r dotenv/config -r ts-node/register ./src/**/*.spec.ts\",\n    \"test:integration\": \"mocha -r dotenv/config -r ts-node/register --timeout 10000 ./test/**/*.test.ts\",\n    \"test\": \"npm run test:unit && npm run test:integration\",\n    \"build\": \"rm -rf lib && tsup\",\n    \"postbuild\": \"cp ./lib/index.d.ts ./lib/index.d.cts\",\n    \"build:docs\": \"typedoc --options .typedocrc.json src\",\n    \"start:docs\": \"serve ./docs\",\n    \"prepublishOnly\": \"npm run build && npm run build:docs\",\n    \"semantic-release\": \"semantic-release\",\n    \"format\": \"prettier --write ./{src,test}/**/*.ts\"\n  },\n  \"author\": \"Contentful GmbH\",\n  \"license\": \"MIT\",\n  \"dependencies\": {\n    \"@types/debug\": \"^4.1.5\",\n    \"contentful-management\": \"^11.6.1\",\n    \"debug\": \"^4.2.0\",\n    \"got\": \"^11.7.0\",\n    \"jsonwebtoken\": \"^9.0.0\",\n    \"lru-cache\": \"^10.4.3\",\n    \"runtypes\": \"^5.0.1\"\n  },\n  \"devDependencies\": {\n    \"@semantic-release/changelog\": \"6.0.3\",\n    \"@semantic-release/git\": \"10.0.1\",\n    \"@types/jsonwebtoken\": \"9.0.6\",\n    \"@types/mocha\": \"10.0.6\",\n    \"@types/node\": \"22.5.4\",\n    \"@types/sinon\": \"17.0.3\",\n    \"@typescript-eslint/eslint-plugin\": \"7.10.0\",\n    \"@typescript-eslint/parser\": \"7.10.0\",\n    \"base64url\": \"3.0.1\",\n    \"dotenv\": \"16.4.5\",\n    \"eslint\": \"8.57.0\",\n    \"eslint-config-prettier\": \"9.1.0\",\n    \"eslint-plugin-prettier\": \"^5.0.0\",\n    \"husky\": \"9.0.11\",\n    \"lint-staged\": \"15.2.10\",\n    \"mocha\": \"10.4.0\",\n    \"prettier\": \"3.2.5\",\n    \"semantic-release\": \"23.1.1\",\n    \"serve\": \"14.2.4\",\n    \"sinon\": \"18.0.0\",\n    \"ts-node\": \"10.9.2\",\n    \"tsup\": \"^8.3.5\",\n    \"typedoc\": \"0.25.13\",\n    \"typescript\": \"5.4.5\"\n  },\n  \"lint-staged\": {\n    \"*.ts\": [\n      \"npm run lint:fix\",\n      \"npm run format\"\n    ]\n  },\n  \"repository\": {\n    \"url\": \"github:contentful/node-apps-toolkit\",\n    \"type\": \"git\"\n  }\n}\n","export type { Response, HttpClient } from './http'\nexport { createHttpClient, createValidateStatusCode, HttpError } from './http'\nexport { createLogger } from './logger'\nexport type { Logger } from './logger'\n","import got, { ExtendOptions, Got, HTTPError, Response as GotResponse } from 'got'\n\nconst config = {\n  prefixUrl: process.env.BASE_URL || 'https://api.contentful.com',\n  retry: { limit: 3 },\n}\n\nexport const createHttpClient = (configOverride: ExtendOptions = {}) => {\n  return got.extend({ ...config, ...configOverride })\n}\n\nexport const createValidateStatusCode = (allowedStatusCodes: number[]) => (response: Response) => {\n  if (!allowedStatusCodes.includes(response.statusCode)) {\n    console.log(response.body)\n    throw new HTTPError(response)\n  }\n  return response\n}\n\nexport { HTTPError as HttpError }\n\nexport type HttpClient = Got\nexport type Response = GotResponse\n","import * as path from 'path'\nimport debug from 'debug'\n\nconst SRC_PATH = path.join(__dirname, '..')\nconst { name: APP_NAME } = require('../../package.json')\n\nconst getNamespaceFromFilename = (filename: string) => {\n  return filename.split(SRC_PATH)[1].slice(0, -3)\n}\n\n/**\n * @internal\n */\nexport const createLogger = (opts: { namespace: string } | { filename: string }) => {\n  const ns = 'namespace' in opts ? opts.namespace : getNamespaceFromFilename(opts.filename)\n\n  return debug(APP_NAME).extend(ns)\n}\n\nexport type Logger = debug.Debugger\n"],"mappings":"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","names":["exports","module","got","debug"]}